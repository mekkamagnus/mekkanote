/* Custom CSS for MekkaNote - Apple Notes Mobile-First Design */

/* CSS Variables using UI Design Guide colors */
:root {
  --kelly-green: #00aa00;      /* Primary accent, actions, highlights */
  --ash-gray: #96bbbb;         /* Secondary text, subtle borders */
  --black-olive: #414535;      /* Primary text, dark surfaces */
  --dutch-white: #f2e3bc;      /* Light backgrounds, cards */
  --lion: #c19875;             /* Warm accent, hover states */
  
  /* Semantic Color Mapping */
  --color-primary: var(--kelly-green);
  --color-secondary: var(--ash-gray);
  --color-accent: var(--lion);
  --color-neutral: var(--black-olive);
  --color-base-100: var(--dutch-white);
  
  /* Text Colors */
  --text-primary: var(--black-olive);
  --text-secondary: var(--ash-gray);
  --text-accent: var(--kelly-green);
  
  /* Background Colors */
  --bg-primary: var(--dutch-white);
  --bg-secondary: #faf7ed;     /* Lighter variant of dutch-white */
  --bg-card: #ffffff;
  --bg-hover: rgba(193, 152, 117, 0.1);
  
  /* Safe area support */
  --safe-area-inset-top: env(safe-area-inset-top, 0px);
  --safe-area-inset-bottom: env(safe-area-inset-bottom, 0px);
  --safe-area-inset-left: env(safe-area-inset-left, 0px);
  --safe-area-inset-right: env(safe-area-inset-right, 0px);
}

/* Base styles */
html, body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  touch-action: manipulation;
  overscroll-behavior: none;
}

/* Mobile-first touch targets */
.btn {
  min-height: 44px;
  min-width: 44px;
}

/* Org-mode syntax highlighting */
.org-headline-1 { 
  @apply text-2xl font-bold text-kelly-green mt-6 mb-3; 
}

.org-headline-2 { 
  @apply text-xl font-semibold text-black-olive mt-5 mb-2; 
}

.org-headline-3 { 
  @apply text-lg font-medium text-base-content mt-4 mb-2; 
}

.org-headline-4 { 
  @apply text-base font-medium text-base-content mt-3 mb-1; 
}

.org-headline-5 { 
  @apply text-sm font-medium text-ash-gray mt-2 mb-1; 
}

.org-headline-6 { 
  @apply text-xs font-medium text-ash-gray mt-2 mb-1; 
}

.org-tag {
  @apply inline-block px-2 py-1 text-xs font-medium bg-kelly-green/10 
         text-kelly-green rounded-full ml-2 hover:bg-kelly-green/20 
         transition-colors duration-200;
}

.org-timestamp {
  @apply inline-block px-2 py-1 text-xs font-mono bg-ash-gray/10 
         text-ash-gray rounded border border-ash-gray/20;
}

.org-drawer {
  @apply border-l-2 border-kelly-green/30 pl-3 my-2 bg-dutch-white/50;
}

.org-property {
  @apply text-sm font-mono text-ash-gray;
}

.org-property-key {
  @apply font-medium text-black-olive;
}

.org-link {
  @apply text-kelly-green underline underline-offset-2 
         hover:text-kelly-green/80 transition-colors duration-200;
}

.org-link-external::after {
  content: "â†—";
  @apply ml-1 text-xs;
}

.org-code-block {
  @apply bg-black-olive/5 border border-black-olive/10 rounded-lg p-3 
         font-mono text-sm overflow-x-auto;
}

.org-inline-code {
  @apply bg-ash-gray/10 px-1 py-0.5 rounded text-sm font-mono;
}

/* Custom scrollbar for mobile */
::-webkit-scrollbar {
  width: 2px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: var(--ash-gray);
  border-radius: 1px;
}

/* HTMX loading states */
.htmx-indicator {
  display: none;
}

.htmx-request .htmx-indicator {
  display: flex;
}

/* Note list item styles */
.note-item {
  @apply border-b border-base-200 py-3 px-4 bg-white hover:bg-base-50 
         transition-colors cursor-pointer;
}

.note-item:active {
  @apply bg-base-100;
}

.note-title {
  @apply text-base font-medium text-black-olive mb-1 line-clamp-2;
}

.note-preview {
  @apply text-sm text-ash-gray mb-2 line-clamp-3;
}

.note-meta {
  @apply flex items-center justify-between text-xs text-ash-gray;
}

/* Editor styles */
.editor-container {
  @apply h-full flex flex-col;
}

.editor-toolbar {
  @apply flex items-center justify-between p-2 border-b border-base-200 
         bg-white sticky top-0 z-10;
}

.editor-content {
  @apply flex-1 p-4;
}

.editor-textarea {
  @apply w-full h-full resize-none border-none outline-none 
         text-base leading-relaxed bg-transparent;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  line-height: 1.6;
}

/* Auto-save indicator */
.autosave-indicator {
  @apply flex items-center text-xs text-ash-gray;
}

.autosave-indicator.saving {
  @apply text-kelly-green;
}

.autosave-indicator.error {
  @apply text-error;
}

/* Search styles */
.search-input {
  @apply w-full px-4 py-3 border border-base-300 rounded-lg 
         text-base placeholder-ash-gray;
}

.search-results {
  @apply mt-4;
}

.search-result-item {
  @apply p-4 border-b border-base-200 hover:bg-base-50 cursor-pointer;
}

.search-highlight {
  @apply bg-yellow-200 px-1 rounded;
}

/* Navigation drawer */
.drawer-overlay {
  @apply fixed inset-0 bg-black bg-opacity-50 z-40 hidden;
}

.drawer-overlay.active {
  @apply block;
}

.drawer-content {
  @apply fixed left-0 top-0 h-full w-80 max-w-[85vw] bg-white 
         shadow-2xl z-50 transform transition-transform duration-300 -translate-x-full;
  padding-top: var(--safe-area-inset-top);
  padding-bottom: var(--safe-area-inset-bottom);
}

.drawer-content.active {
  @apply translate-x-0;
}

.drawer-header {
  @apply p-4 border-b border-base-200;
}

.drawer-nav {
  @apply p-2;
}

.drawer-nav-item {
  @apply flex items-center p-3 rounded-lg hover:bg-base-100 
         cursor-pointer transition-colors;
}

.drawer-nav-item.active {
  @apply bg-kelly-green/10 text-kelly-green;
}

/* Folder list styles */
.folder-item {
  @apply flex items-center justify-between p-3 hover:bg-base-50 
         cursor-pointer border-b border-base-200;
}

.folder-icon {
  @apply w-8 h-8 mr-3 text-kelly-green;
}

.folder-info {
  @apply flex-1;
}

.folder-name {
  @apply text-base font-medium text-black-olive;
}

.folder-count {
  @apply text-sm text-ash-gray;
}

/* Settings page styles */
.settings-section {
  @apply mb-6;
}

.settings-title {
  @apply text-lg font-semibold text-black-olive mb-3;
}

.settings-item {
  @apply flex items-center justify-between p-3 border-b border-base-200;
}

/* Error states */
.error-container {
  @apply flex flex-col items-center justify-center p-8 text-center;
}

.error-icon {
  @apply w-12 h-12 text-error mb-4;
}

.error-title {
  @apply text-lg font-semibold text-black-olive mb-2;
}

.error-message {
  @apply text-sm text-ash-gray mb-4;
}

/* Empty states */
.empty-state {
  @apply flex flex-col items-center justify-center p-8 text-center;
}

.empty-icon {
  @apply w-16 h-16 text-ash-gray mb-4;
}

.empty-title {
  @apply text-lg font-semibold text-black-olive mb-2;
}

.empty-message {
  @apply text-sm text-ash-gray mb-4;
}

/* Responsive utilities */
@media (min-width: 768px) {
  /* Tablet styles */
  #app {
    max-width: 768px;
    margin: 0 auto;
    box-shadow: 0 0 20px rgba(0,0,0,0.1);
  }
  
  .note-item {
    @apply rounded-lg mb-2 border border-base-200;
  }
  
  #mobile-header,
  .btm-nav {
    left: 50%;
    transform: translateX(-50%);
    max-width: 768px;
  }
}

@media (min-width: 1024px) {
  /* Desktop styles */
  #app {
    max-width: 1024px;
    margin: 0 auto;
  }
  
  .btm-nav {
    display: none;
  }
  
  .drawer-content {
    position: relative;
    transform: none;
    width: 250px;
  }
  
  #mobile-header {
    left: 50%;
    transform: translateX(-50%);
    max-width: 1024px;
  }
}

/* Utility classes */
.line-clamp-1 {
  display: -webkit-box;
  -webkit-line-clamp: 1;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.line-clamp-2 {
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.line-clamp-3 {
  display: -webkit-box;
  -webkit-line-clamp: 3;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

/* PWA specific styles */
@media (display-mode: standalone) {
  body {
    user-select: none;
    -webkit-touch-callout: none;
  }
  
  .editor-textarea {
    user-select: text;
    -webkit-touch-callout: default;
  }
}